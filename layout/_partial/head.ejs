<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title><%= page.title %> | <%= config.title %></title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="<%- page.description || page.excerpt ? strip_html(page.excerpt).substring(0, 160) : (theme.description || config.description) %>">
  <meta name="keywords" content="<%- page.tags && page.tags.length ? page.tags.map(t => t.name).join(',') : (config.keywords || '') %>">
  <meta name="author" content="<%= config.author %>">
  <link rel="canonical" href="<%- config.url %><%- url_for(page.path) %>">

  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="<%= page.title %> | <%= config.title %>">
  <meta property="og:description" content="<%- page.description || page.excerpt ? strip_html(page.excerpt).substring(0, 160) : (theme.description || config.description) %>">
  <meta property="og:type" content="<%= is_post() ? 'article' : 'website' %>">
  <meta property="og:url" content="<%- config.url %><%- url_for(page.path) %>">
  <meta property="og:site_name" content="<%= config.title %>">
  <% if (page.date) { %><meta property="article:published_time" content="<%= page.date.toISOString() %>"><% } %>

  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="<%= page.title %> | <%= config.title %>">
  <meta name="twitter:description" content="<%- page.description || page.excerpt ? strip_html(page.excerpt).substring(0, 160) : (theme.description || config.description) %>">

  <!-- Favicon 配置 -->
  <% if (theme.favicon) { %>
    <% if (theme.favicon.ico) { %>
      <link rel="icon" type="image/x-icon" href="<%- url_for(theme.favicon.ico) %>">
    <% } %>
    <% if (theme.favicon.small) { %>
      <link rel="icon" type="image/png" sizes="16x16" href="<%- url_for(theme.favicon.small) %>">
    <% } %>
    <% if (theme.favicon.medium) { %>
      <link rel="icon" type="image/png" sizes="32x32" href="<%- url_for(theme.favicon.medium) %>">
    <% } %>
    <% if (theme.favicon.large) { %>
      <link rel="icon" type="image/png" sizes="192x192" href="<%- url_for(theme.favicon.large) %>">
    <% } %>
    <% if (theme.favicon.apple_touch_icon) { %>
      <link rel="apple-touch-icon" sizes="180x180" href="<%- url_for(theme.favicon.apple_touch_icon) %>">
    <% } %>
  <% } %>

  <!-- 外部样式 - 统一使用 jsdelivr CDN -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" crossorigin="anonymous">

  <!-- 代码高亮样式 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-dark.min.css" crossorigin="anonymous">

  <!-- Mermaid.js 库 (defer加载) -->
  <script defer src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js" crossorigin="anonymous"></script>

  <!-- 主题样式 -->
  <link rel="stylesheet" href="<%- url_for('css/theme-colors.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/main.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/code.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/code-custom.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/code-languages.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/mermaid.css') %>">

  <link rel="stylesheet" href="<%- url_for('css/vs-code.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/post.css') %>?v=<%= Date.now() %>">
  <link rel="stylesheet" href="<%- url_for('css/tag.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/categories.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/archive.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/search.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/mobile.css') %>">  <link rel="stylesheet" href="<%- url_for('css/responsive.css') %>">
  <link rel="stylesheet" href="<%- url_for('css/elements.css') %>">

  <!-- 添加 JetBrains Mono 字体 -->  
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

  <%- partial('_partial/custom_head') %>
  <script defer src="<%- url_for('js/explorer.js') %>"></script>
  <script defer src="<%- url_for('js/code-enhance.js') %>"></script>
</head>
